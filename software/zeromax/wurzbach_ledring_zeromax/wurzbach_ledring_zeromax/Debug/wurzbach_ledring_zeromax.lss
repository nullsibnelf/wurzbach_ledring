
AVRASM ver. 2.2.6  C:\Users\Ironman\Documents\Atmel Studio\7.0\wurzbach_ledring_zeromax\wurzbach_ledring_zeromax\main.asm Thu Aug 02 13:09:24 2018

[builtin](2): Including file 'C:/Program Files (x86)\Atmel\Studio\7.0\Packs\atmel\ATtiny_DFP\1.2.118\avrasm\inc\tn13def.inc'
C:\Users\Ironman\Documents\Atmel Studio\7.0\wurzbach_ledring_zeromax\wurzbach_ledring_zeromax\main.asm(35): Including file 'C:/Program Files (x86)\Atmel\Studio\7.0\Packs\atmel\ATtiny_DFP\1.2.118\avrasm\inc\tn13def.inc'
[builtin](2): Including file 'C:/Program Files (x86)\Atmel\Studio\7.0\Packs\atmel\ATtiny_DFP\1.2.118\avrasm\inc\tn13def.inc'
C:\Users\Ironman\Documents\Atmel Studio\7.0\wurzbach_ledring_zeromax\wurzbach_ledring_zeromax\main.asm(35): Including file 'C:/Program Files (x86)\Atmel\Studio\7.0\Packs\atmel\ATtiny_DFP\1.2.118\avrasm\inc\tn13def.inc'
                                 
                                 /*
                                 
                                 ;***** Created: 2011-02-09 12:03 ******* Source: ATtiny13.xml ************
                                 ;*************************************************************************
                                 ;* A P P L I C A T I O N   N O T E   F O R   T H E   A V R   F A M I L Y
                                 ;* 
                                 ;* Number            : AVR000
                                 ;* File Name         : "tn13def.inc"
                                 ;* Title             : Register/Bit Definitions for the ATtiny13
                                 ;* Date              : 2011-02-09
                                 ;* Version           : 2.35
                                 ;* Support E-mail    : avr@atmel.com
                                 ;* Target MCU        : ATtiny13
                                 ;* 
                                 ;* DESCRIPTION
                                 ;* When including this file in the assembly program file, all I/O register 
                                 ;* names and I/O register bit names appearing in the data book can be used.
                                 ;* In addition, the six registers forming the three data pointers X, Y and 
                                 ;* Z have been assigned names XL - ZH. Highest RAM address for Internal 
                                 ;* SRAM is also defined 
                                 ;* 
                                 ;* The Register names are represented by their hexadecimal address.
                                 ;* 
                                 ;* The Register Bit names are represented by their bit number (0-7).
                                 ;* 
                                 ;* Please observe the difference in using the bit names with instructions
                                 ;* such as "sbr"/"cbr" (set/clear bit in register) and "sbrs"/"sbrc"
                                 ;* (skip if bit in register set/cleared). The following example illustrates
                                 ;* this:
                                 ;* 
                                 ;* in    r16,PORTB             ;read PORTB latch
                                 ;* sbr   r16,(1<<PB6)+(1<<PB5) ;set PB6 and PB5 (use masks, not bit#)
                                 ;* out   PORTB,r16             ;output to PORTB
                                 ;* 
                                 ;* in    r16,TIFR              ;read the Timer Interrupt Flag Register
                                 ;* sbrc  r16,TOV0              ;test the overflow flag (use bit#)
                                 ;* rjmp  TOV0_is_set           ;jump if set
                                 ;* ...                         ;otherwise do something else
                                 ;*************************************************************************
                                 
                                 #ifndef _TN13DEF_INC_
                                 #define _TN13DEF_INC_
                                 
                                 
                                 #pragma partinc 0
                                 
                                 ; ***** SPECIFY DEVICE ***************************************************
                                 .device ATtiny13
                                 #pragma AVRPART ADMIN PART_NAME ATtiny13
                                 .equ	SIGNATURE_000	= 0x1e
                                 .equ	SIGNATURE_001	= 0x90
                                 .equ	SIGNATURE_002	= 0x07
                                 
                                 #pragma AVRPART CORE CORE_VERSION V2
                                 #pragma AVRPART CORE NEW_INSTRUCTIONS lpm rd,z+
                                 
                                 
                                 ; ***** I/O REGISTER DEFINITIONS *****************************************
                                 ; NOTE:
                                 ; Definitions marked "MEMORY MAPPED"are extended I/O ports
                                 ; and cannot be used with IN/OUT instructions
                                 .equ	SREG	= 0x3f
                                 .equ	SPL	= 0x3d
                                 .equ	GIMSK	= 0x3b
                                 .equ	GIFR	= 0x3a
                                 .equ	TIMSK0	= 0x39
                                 .equ	TIFR0	= 0x38
                                 .equ	SPMCSR	= 0x37
                                 .equ	OCR0A	= 0x36
                                 .equ	MCUCR	= 0x35
                                 .equ	MCUSR	= 0x34
                                 .equ	TCCR0B	= 0x33
                                 .equ	TCNT0	= 0x32
                                 .equ	OSCCAL	= 0x31
                                 .equ	TCCR0A	= 0x2f
                                 .equ	DWDR	= 0x2e
                                 .equ	OCR0B	= 0x29
                                 .equ	GTCCR	= 0x28
                                 .equ	CLKPR	= 0x26
                                 .equ	WDTCR	= 0x21
                                 .equ	EEAR	= 0x1e
                                 .equ	EEDR	= 0x1d
                                 .equ	EECR	= 0x1c
                                 .equ	PORTB	= 0x18
                                 .equ	DDRB	= 0x17
                                 .equ	PINB	= 0x16
                                 .equ	PCMSK	= 0x15
                                 .equ	DIDR0	= 0x14
                                 .equ	ACSR	= 0x08
                                 .equ	ADMUX	= 0x07
                                 .equ	ADCSRA	= 0x06
                                 .equ	ADCH	= 0x05
                                 .equ	ADCL	= 0x04
                                 .equ	ADCSRB	= 0x03
                                 
                                 
                                 ; ***** BIT DEFINITIONS **************************************************
                                 
                                 ; ***** AD_CONVERTER *****************
                                 ; ADMUX - The ADC multiplexer Selection Register
                                 .equ	MUX0	= 0	; Analog Channel and Gain Selection Bits
                                 .equ	MUX1	= 1	; Analog Channel and Gain Selection Bits
                                 .equ	ADLAR	= 5	; Left Adjust Result
                                 .equ	REFS0	= 6	; Reference Selection Bit 0
                                 
                                 ; ADCSRA - The ADC Control and Status register
                                 .equ	ADPS0	= 0	; ADC  Prescaler Select Bits
                                 .equ	ADPS1	= 1	; ADC  Prescaler Select Bits
                                 .equ	ADPS2	= 2	; ADC  Prescaler Select Bits
                                 .equ	ADIE	= 3	; ADC Interrupt Enable
                                 .equ	ADIF	= 4	; ADC Interrupt Flag
                                 .equ	ADATE	= 5	; ADC Auto Trigger Enable
                                 .equ	ADSC	= 6	; ADC Start Conversion
                                 .equ	ADEN	= 7	; ADC Enable
                                 
                                 ; ADCH - ADC Data Register High Byte
                                 .equ	ADCH0	= 0	; ADC Data Register High Byte Bit 0
                                 .equ	ADCH1	= 1	; ADC Data Register High Byte Bit 1
                                 .equ	ADCH2	= 2	; ADC Data Register High Byte Bit 2
                                 .equ	ADCH3	= 3	; ADC Data Register High Byte Bit 3
                                 .equ	ADCH4	= 4	; ADC Data Register High Byte Bit 4
                                 .equ	ADCH5	= 5	; ADC Data Register High Byte Bit 5
                                 .equ	ADCH6	= 6	; ADC Data Register High Byte Bit 6
                                 .equ	ADCH7	= 7	; ADC Data Register High Byte Bit 7
                                 
                                 ; ADCL - ADC Data Register Low Byte
                                 .equ	ADCL0	= 0	; ADC Data Register Low Byte Bit 0
                                 .equ	ADCL1	= 1	; ADC Data Register Low Byte Bit 1
                                 .equ	ADCL2	= 2	; ADC Data Register Low Byte Bit 2
                                 .equ	ADCL3	= 3	; ADC Data Register Low Byte Bit 3
                                 .equ	ADCL4	= 4	; ADC Data Register Low Byte Bit 4
                                 .equ	ADCL5	= 5	; ADC Data Register Low Byte Bit 5
                                 .equ	ADCL6	= 6	; ADC Data Register Low Byte Bit 6
                                 .equ	ADCL7	= 7	; ADC Data Register Low Byte Bit 7
                                 
                                 ; ADCSRB - ADC Control and Status Register B
                                 .equ	ADTS0	= 0	; ADC Auto Trigger Source 0
                                 .equ	ADTS1	= 1	; ADC Auto Trigger Source 1
                                 .equ	ADTS2	= 2	; ADC Auto Trigger Source 2
                                 
                                 ; DIDR0 - Digital Input Disable Register 0
                                 .equ	ADC1D	= 2	; ADC2 Digital input Disable
                                 .equ	ADC3D	= 3	; ADC3 Digital input Disable
                                 .equ	ADC2D	= 4	; ADC2 Digital input Disable
                                 .equ	ADC0D	= 5	; ADC0 Digital input Disable
                                 
                                 
                                 ; ***** ANALOG_COMPARATOR ************
                                 ; ADCSRB - ADC Control and Status Register B
                                 .equ	ACME	= 6	; Analog Comparator Multiplexer Enable
                                 
                                 ; ACSR - Analog Comparator Control And Status Register
                                 .equ	ACIS0	= 0	; Analog Comparator Interrupt Mode Select bit 0
                                 .equ	ACIS1	= 1	; Analog Comparator Interrupt Mode Select bit 1
                                 .equ	ACIE	= 3	; Analog Comparator Interrupt Enable
                                 .equ	ACI	= 4	; Analog Comparator Interrupt Flag
                                 .equ	ACO	= 5	; Analog Compare Output
                                 .equ	ACBG	= 6	; Analog Comparator Bandgap Select
                                 .equ	AINBG	= ACBG	; For compatibility
                                 .equ	ACD	= 7	; Analog Comparator Disable
                                 
                                 ; DIDR0 - 
                                 .equ	AIN0D	= 0	; AIN0 Digital Input Disable
                                 .equ	AIN1D	= 1	; AIN1 Digital Input Disable
                                 
                                 
                                 ; ***** EEPROM ***********************
                                 ; EEAR - EEPROM Read/Write Access
                                 .equ	EEARL	= EEAR	; For compatibility
                                 .equ	EEAR0	= 0	; EEPROM Read/Write Access bit 0
                                 .equ	EEAR1	= 1	; EEPROM Read/Write Access bit 1
                                 .equ	EEAR2	= 2	; EEPROM Read/Write Access bit 2
                                 .equ	EEAR3	= 3	; EEPROM Read/Write Access bit 3
                                 .equ	EEAR4	= 4	; EEPROM Read/Write Access bit 4
                                 .equ	EEAR5	= 5	; EEPROM Read/Write Access bit 5
                                 
                                 ; EEDR - EEPROM Data Register
                                 .equ	EEDR0	= 0	; EEPROM Data Register bit 0
                                 .equ	EEDR1	= 1	; EEPROM Data Register bit 1
                                 .equ	EEDR2	= 2	; EEPROM Data Register bit 2
                                 .equ	EEDR3	= 3	; EEPROM Data Register bit 3
                                 .equ	EEDR4	= 4	; EEPROM Data Register bit 4
                                 .equ	EEDR5	= 5	; EEPROM Data Register bit 5
                                 .equ	EEDR6	= 6	; EEPROM Data Register bit 6
                                 .equ	EEDR7	= 7	; EEPROM Data Register bit 7
                                 
                                 ; EECR - EEPROM Control Register
                                 .equ	EERE	= 0	; EEPROM Read Enable
                                 .equ	EEWE	= 1	; EEPROM Write Enable
                                 .equ	EEPE	= EEWE	; For compatibility
                                 .equ	EEMWE	= 2	; EEPROM Master Write Enable
                                 .equ	EEMPE	= EEMWE	; For compatibility
                                 .equ	EERIE	= 3	; EEProm Ready Interrupt Enable
                                 .equ	EEPM0	= 4	; 
                                 .equ	EEPM1	= 5	; 
                                 
                                 
                                 ; ***** CPU **************************
                                 ; SREG - Status Register
                                 .equ	SREG_C	= 0	; Carry Flag
                                 .equ	SREG_Z	= 1	; Zero Flag
                                 .equ	SREG_N	= 2	; Negative Flag
                                 .equ	SREG_V	= 3	; Two's Complement Overflow Flag
                                 .equ	SREG_S	= 4	; Sign Bit
                                 .equ	SREG_H	= 5	; Half Carry Flag
                                 .equ	SREG_T	= 6	; Bit Copy Storage
                                 .equ	SREG_I	= 7	; Global Interrupt Enable
                                 
                                 ; SPL - Stack Pointer Low Byte
                                 .equ	SP0	= 0	; Stack Pointer Bit 0
                                 .equ	SP1	= 1	; Stack Pointer Bit 1
                                 .equ	SP2	= 2	; Stack Pointer Bit 2
                                 .equ	SP3	= 3	; Stack Pointer Bit 3
                                 .equ	SP4	= 4	; Stack Pointer Bit 4
                                 .equ	SP5	= 5	; Stack Pointer Bit 5
                                 .equ	SP6	= 6	; Stack Pointer Bit 6
                                 .equ	SP7	= 7	; Stack Pointer Bit 7
                                 
                                 ; MCUCR - MCU Control Register
                                 .equ	ISC00	= 0	; Interrupt Sense Control 0 bit 0
                                 .equ	ISC01	= 1	; Interrupt Sense Control 0 bit 1
                                 .equ	SM0	= 3	; Sleep Mode Select Bit 0
                                 .equ	SM1	= 4	; Sleep Mode Select Bit 1
                                 .equ	SE	= 5	; Sleep Enable
                                 .equ	PUD	= 6	; Pull-up Disable
                                 
                                 ; MCUSR - MCU Status register
                                 .equ	PORF	= 0	; Power-On Reset Flag
                                 .equ	EXTRF	= 1	; External Reset Flag
                                 .equ	BORF	= 2	; Brown-out Reset Flag
                                 .equ	WDRF	= 3	; Watchdog Reset Flag
                                 
                                 ; OSCCAL - Oscillator Calibration Register
                                 .equ	CAL0	= 0	; Oscillatro Calibration Value Bit 0
                                 .equ	CAL1	= 1	; Oscillatro Calibration Value Bit 1
                                 .equ	CAL2	= 2	; Oscillatro Calibration Value Bit 2
                                 .equ	CAL3	= 3	; Oscillatro Calibration Value Bit 3
                                 .equ	CAL4	= 4	; Oscillatro Calibration Value Bit 4
                                 .equ	CAL5	= 5	; Oscillatro Calibration Value Bit 5
                                 .equ	CAL6	= 6	; Oscillatro Calibration Value Bit 6
                                 
                                 ; CLKPR - Clock Prescale Register
                                 .equ	CLKPS0	= 0	; Clock Prescaler Select Bit 0
                                 .equ	CLKPS1	= 1	; Clock Prescaler Select Bit 1
                                 .equ	CLKPS2	= 2	; Clock Prescaler Select Bit 2
                                 .equ	CLKPS3	= 3	; Clock Prescaler Select Bit 3
                                 .equ	CLKPCE	= 7	; Clock Prescaler Change Enable
                                 
                                 ; DWDR - Debug Wire Data Register
                                 .equ	DWDR0	= 0	; Debug Wire Data Register Bit 0
                                 .equ	DWDR1	= 1	; Debug Wire Data Register Bit 1
                                 .equ	DWDR2	= 2	; Debug Wire Data Register Bit 2
                                 .equ	DWDR3	= 3	; Debug Wire Data Register Bit 3
                                 .equ	DWDR4	= 4	; Debug Wire Data Register Bit 4
                                 .equ	DWDR5	= 5	; Debug Wire Data Register Bit 5
                                 .equ	DWDR6	= 6	; Debug Wire Data Register Bit 6
                                 .equ	DWDR7	= 7	; Debug Wire Data Register Bit 7
                                 
                                 ; SPMCSR - Store Program Memory Control and Status Register
                                 .equ	SPMEN	= 0	; Store program Memory Enable
                                 .equ	PGERS	= 1	; Page Erase
                                 .equ	PGWRT	= 2	; Page Write
                                 .equ	RFLB	= 3	; Read Fuse and Lock Bits
                                 .equ	CTPB	= 4	; Clear Temporary Page Buffer
                                 
                                 
                                 ; ***** PORTB ************************
                                 ; PORTB - Data Register, Port B
                                 .equ	PORTB0	= 0	; 
                                 .equ	PB0	= 0	; For compatibility
                                 .equ	PORTB1	= 1	; 
                                 .equ	PB1	= 1	; For compatibility
                                 .equ	PORTB2	= 2	; 
                                 .equ	PB2	= 2	; For compatibility
                                 .equ	PORTB3	= 3	; 
                                 .equ	PB3	= 3	; For compatibility
                                 .equ	PORTB4	= 4	; 
                                 .equ	PB4	= 4	; For compatibility
                                 .equ	PORTB5	= 5	; 
                                 .equ	PB5	= 5	; For compatibility
                                 
                                 ; DDRB - Data Direction Register, Port B
                                 .equ	DDB0	= 0	; 
                                 .equ	DDB1	= 1	; 
                                 .equ	DDB2	= 2	; 
                                 .equ	DDB3	= 3	; 
                                 .equ	DDB4	= 4	; 
                                 .equ	DDB5	= 5	; 
                                 
                                 ; PINB - Input Pins, Port B
                                 .equ	PINB0	= 0	; 
                                 .equ	PINB1	= 1	; 
                                 .equ	PINB2	= 2	; 
                                 .equ	PINB3	= 3	; 
                                 .equ	PINB4	= 4	; 
                                 .equ	PINB5	= 5	; 
                                 
                                 
                                 ; ***** EXTERNAL_INTERRUPT ***********
                                 ; MCUCR - MCU Control Register
                                 ;.equ	ISC00	= 0	; Interrupt Sense Control 0 Bit 0
                                 ;.equ	ISC01	= 1	; Interrupt Sense Control 0 Bit 1
                                 
                                 ; GIMSK - General Interrupt Mask Register
                                 .equ	GICR	= GIMSK	; For compatibility
                                 .equ	PCIE	= 5	; Pin Change Interrupt Enable
                                 .equ	INT0	= 6	; External Interrupt Request 0 Enable
                                 
                                 ; GIFR - General Interrupt Flag register
                                 .equ	PCIF	= 5	; Pin Change Interrupt Flag
                                 .equ	INTF0	= 6	; External Interrupt Flag 0
                                 
                                 ; PCMSK - Pin Change Enable Mask
                                 .equ	PCINT0	= 0	; Pin Change Enable Mask Bit 0
                                 .equ	PCINT1	= 1	; Pin Change Enable Mask Bit 1
                                 .equ	PCINT2	= 2	; Pin Change Enable Mask Bit 2
                                 .equ	PCINT3	= 3	; Pin Change Enable Mask Bit 3
                                 .equ	PCINT4	= 4	; Pin Change Enable Mask Bit 4
                                 .equ	PCINT5	= 5	; Pin Change Enable Mask Bit 5
                                 
                                 
                                 ; ***** TIMER_COUNTER_0 **************
                                 ; TIMSK0 - Timer/Counter0 Interrupt Mask Register
                                 .equ	TOIE0	= 1	; Timer/Counter0 Overflow Interrupt Enable
                                 .equ	OCIE0A	= 2	; Timer/Counter0 Output Compare Match A Interrupt Enable
                                 .equ	OCIE0B	= 3	; Timer/Counter0 Output Compare Match B Interrupt Enable
                                 
                                 ; TIFR0 - Timer/Counter0 Interrupt Flag register
                                 .equ	TOV0	= 1	; Timer/Counter0 Overflow Flag
                                 .equ	OCF0A	= 2	; Timer/Counter0 Output Compare Flag 0A
                                 .equ	OCF0B	= 3	; Timer/Counter0 Output Compare Flag 0B
                                 
                                 ; OCR0A - Timer/Counter0 Output Compare Register
                                 .equ	OCR0A_0	= 0	; 
                                 .equ	OCR0A_1	= 1	; 
                                 .equ	OCR0A_2	= 2	; 
                                 .equ	OCR0A_3	= 3	; 
                                 .equ	OCR0A_4	= 4	; 
                                 .equ	OCR0A_5	= 5	; 
                                 .equ	OCR0A_6	= 6	; 
                                 .equ	OCR0A_7	= 7	; 
                                 
                                 ; TCCR0A - Timer/Counter  Control Register A
                                 .equ	WGM00	= 0	; Waveform Generation Mode
                                 .equ	WGM01	= 1	; Waveform Generation Mode
                                 .equ	COM0B0	= 4	; Compare Match Output B Mode
                                 .equ	COM0B1	= 5	; Compare Match Output B Mode
                                 .equ	COM0A0	= 6	; Compare Match Output A Mode
                                 .equ	COM0A1	= 7	; Compare Match Output A Mode
                                 
                                 ; TCNT0 - Timer/Counter0
                                 .equ	TCNT0_0	= 0	; 
                                 .equ	TCNT0_1	= 1	; 
                                 .equ	TCNT0_2	= 2	; 
                                 .equ	TCNT0_3	= 3	; 
                                 .equ	TCNT0_4	= 4	; 
                                 .equ	TCNT0_5	= 5	; 
                                 .equ	TCNT0_6	= 6	; 
                                 .equ	TCNT0_7	= 7	; 
                                 
                                 ; TCCR0B - Timer/Counter Control Register B
                                 .equ	CS00	= 0	; Clock Select
                                 .equ	CS01	= 1	; Clock Select
                                 .equ	CS02	= 2	; Clock Select
                                 .equ	WGM02	= 3	; Waveform Generation Mode
                                 .equ	FOC0B	= 6	; Force Output Compare B
                                 .equ	FOC0A	= 7	; Force Output Compare A
                                 
                                 ; OCR0B - Timer/Counter0 Output Compare Register
                                 .equ	OCR0B_0	= 0	; 
                                 .equ	OCR0B_1	= 1	; 
                                 .equ	OCR0B_2	= 2	; 
                                 .equ	OCR0B_3	= 3	; 
                                 .equ	OCR0B_4	= 4	; 
                                 .equ	OCR0B_5	= 5	; 
                                 .equ	OCR0B_6	= 6	; 
                                 .equ	OCR0B_7	= 7	; 
                                 
                                 ; GTCCR - General Timer Conuter Register
                                 .equ	PSR10	= 0	; Prescaler Reset Timer/Counter0
                                 .equ	TSM	= 7	; Timer/Counter Synchronization Mode
                                 
                                 
                                 ; ***** WATCHDOG *********************
                                 ; WDTCR - Watchdog Timer Control Register
                                 .equ	WDP0	= 0	; Watch Dog Timer Prescaler bit 0
                                 .equ	WDP1	= 1	; Watch Dog Timer Prescaler bit 1
                                 .equ	WDP2	= 2	; Watch Dog Timer Prescaler bit 2
                                 .equ	WDE	= 3	; Watch Dog Enable
                                 .equ	WDCE	= 4	; Watchdog Change Enable
                                 .equ	WDP3	= 5	; Watchdog Timer Prescaler Bit 3
                                 .equ	WDTIE	= 6	; Watchdog Timeout Interrupt Enable
                                 .equ	WDTIF	= 7	; Watchdog Timeout Interrupt Flag
                                 
                                 
                                 
                                 ; ***** LOCKSBITS ********************************************************
                                 .equ	LB1	= 0	; Lockbit
                                 .equ	LB2	= 1	; Lockbit
                                 
                                 
                                 ; ***** FUSES ************************************************************
                                 ; LOW fuse bits
                                 .equ	CKSEL0	= 0	; Select Clock Source
                                 .equ	CKSEL1	= 1	; Select Clock Source
                                 .equ	SUT0	= 2	; Select start-up time
                                 .equ	SUT1	= 3	; Select start-up time
                                 .equ	CKDIV8	= 4	; Start up with system clock divided by 8
                                 .equ	WDTON	= 5	; Watch dog timer always on
                                 .equ	EESAVE	= 6	; Keep EEprom contents during chip erase
                                 .equ	SPIEN	= 7	; SPI programming enable
                                 
                                 ; HIGH fuse bits
                                 .equ	RSTDISBL	= 0	; Disable external reset
                                 .equ	BODLEVEL0	= 1	; Enable BOD and select level
                                 .equ	BODLEVEL1	= 2	; Enable BOD and select level
                                 .equ	DWEN	= 3	; DebugWire Enable
                                 .equ	SELFPRGEN	= 4	; Self Programming Enable
                                 
                                 
                                 
                                 ; ***** CPU REGISTER DEFINITIONS *****************************************
                                 .def	XH	= r27
                                 .def	XL	= r26
                                 .def	YH	= r29
                                 .def	YL	= r28
                                 .def	ZH	= r31
                                 .def	ZL	= r30
                                 
                                 
                                 
                                 ; ***** DATA MEMORY DECLARATIONS *****************************************
                                 .equ	FLASHEND	= 0x01ff	; Note: Word address
                                 .equ	IOEND	= 0x003f
                                 .equ	SRAM_START	= 0x0060
                                 .equ	SRAM_SIZE	= 64
                                 .equ	RAMEND	= 0x009f
                                 .equ	XRAMEND	= 0x0000
                                 .equ	E2END	= 0x003f
                                 .equ	EEPROMEND	= 0x003f
                                 .equ	EEADRBITS	= 6
                                 #pragma AVRPART MEMORY PROG_FLASH 1024
                                 #pragma AVRPART MEMORY EEPROM 64
                                 #pragma AVRPART MEMORY INT_SRAM SIZE 64
                                 #pragma AVRPART MEMORY INT_SRAM START_ADDR 0x60
                                 
                                 
                                 
                                 ; ***** BOOTLOADER DECLARATIONS ******************************************
                                 .equ	PAGESIZE	= 16
                                 
                                 
                                 
                                 ; ***** INTERRUPT VECTORS ************************************************
                                 .equ	INT0addr	= 0x0001	; External Interrupt 0
                                 .equ	PCI0addr	= 0x0002	; External Interrupt Request 0
                                 .equ	OVF0addr	= 0x0003	; Timer/Counter0 Overflow
                                 .equ	ERDYaddr	= 0x0004	; EEPROM Ready
                                 .equ	ACIaddr	= 0x0005	; Analog Comparator
                                 .equ	OC0Aaddr	= 0x0006	; Timer/Counter Compare Match A
                                 .equ	OC0Baddr	= 0x0007	; Timer/Counter Compare Match B
                                 .equ	WDTaddr	= 0x0008	; Watchdog Time-out
                                 .equ	ADCCaddr	= 0x0009	; ADC Conversion Complete
                                 
                                 .equ	INT_VECTORS_SIZE	= 10	; size in words
                                 
                                 #endif  /* _TN13DEF_INC_ */
                                 
                                 ; ***** END OF FILE ******************************************************
                                 
                                  *  wurzbach_ledring_zeromax.asm
                                  *
                                  *  Created: 01.08.2018
                                  *  Author: ksl2fe
                                  */ 
                                 
                                 
                                   /*
                                 	Registerübersicht
                                 	
                                 	r16		Arbeitsregister
                                 
                                 	r17		Arbeitsregister Zwischenergebnis
                                 	r18		Schleifen-Zähler
                                 	r19		LED-Arbeits-register
                                 
                                 	r20		grün
                                 	r21		rot
                                 	r22		blau
                                 	r23		sollwert leuchtende leds
                                 	
                                 	r24		AD Rechnung
                                 	r25		AD Rechnung
                                 
                                 
                                 						----u---
                                 			PB5		1 -|		|- 8	VCC
                                 			PB3		2 -|		|- 7	PB2	(SCK)
                                 	(LED)	PB4		3 -|		|- 6	PB1 (MISO)
                                 			GND		4 -|		|- 5	PB0 (MOSI)
                                 						--------
                                  */
                                  
                                 .include "tn13def.inc"
                                 
                                 ;***** Created: 2011-02-09 12:03 ******* Source: ATtiny13.xml ************
                                 ;*************************************************************************
                                 ;* A P P L I C A T I O N   N O T E   F O R   T H E   A V R   F A M I L Y
                                 ;* 
                                 ;* Number            : AVR000
                                 ;* File Name         : "tn13def.inc"
                                 ;* Title             : Register/Bit Definitions for the ATtiny13
                                 ;* Date              : 2011-02-09
                                 ;* Version           : 2.35
                                 ;* Support E-mail    : avr@atmel.com
                                 ;* Target MCU        : ATtiny13
                                 ;* 
                                 ;* DESCRIPTION
                                 ;* When including this file in the assembly program file, all I/O register 
                                 ;* names and I/O register bit names appearing in the data book can be used.
                                 ;* In addition, the six registers forming the three data pointers X, Y and 
                                 ;* Z have been assigned names XL - ZH. Highest RAM address for Internal 
                                 ;* SRAM is also defined 
                                 ;* 
                                 ;* The Register names are represented by their hexadecimal address.
                                 ;* 
                                 ;* The Register Bit names are represented by their bit number (0-7).
                                 ;* 
                                 ;* Please observe the difference in using the bit names with instructions
                                 ;* such as "sbr"/"cbr" (set/clear bit in register) and "sbrs"/"sbrc"
                                 ;* (skip if bit in register set/cleared). The following example illustrates
                                 ;* this:
                                 ;* 
                                 ;* in    r16,PORTB             ;read PORTB latch
                                 ;* sbr   r16,(1<<PB6)+(1<<PB5) ;set PB6 and PB5 (use masks, not bit#)
                                 ;* out   PORTB,r16             ;output to PORTB
                                 ;* 
                                 ;* in    r16,TIFR              ;read the Timer Interrupt Flag Register
                                 ;* sbrc  r16,TOV0              ;test the overflow flag (use bit#)
                                 ;* rjmp  TOV0_is_set           ;jump if set
                                 ;* ...                         ;otherwise do something else
                                 ;*************************************************************************
                                 
                                 #ifndef _TN13DEF_INC_
                                 #endif  /* _TN13DEF_INC_ */
                                 
                                 ; ***** END OF FILE ******************************************************
                                 
                                 
                                  init:
                                 
000000 e505                      	ldi		r16, 0x55
000001 bf01                      	out		OSCCAL, r16			// Korrekturwert für int. Oscillator
                                  
000002 9abc                      	sbi		DDRB, 4				// LED als Ausgang
000003 9ac2                      	sbi		PORTB, 2			// PU für Taster
000004 9ac1                      	sbi		PORTB, 1			// PU für Taster
000005 9ac0                      	sbi		PORTB, 0			// PU für Taster
                                 
000006 e040                      	ldi		r20, 0x00			// gn
000007 e050                      	ldi		r21, 0x00			// rt
000008 e060                      	ldi		r22, 0x00			// bl
000009 e070                      	ldi		r23, 0x00			// 0x0D -> vollausschlag - 13 LEDs
                                 	
00000a ee03                          ldi     r16, (1<<ADEN) | (1<<ADSC) | (1<<ADATE) | (1<<ADPS1) | (1<<ADPS0)
00000b b906                          out     ADCSRA, r16
                                 	
00000c e203                      	ldi     r16, (1<<ADLAR) | (1<<MUX1) | (1<<MUX0)
00000d b907                          out     ADMUX, r16
                                 	
00000e d093                      	rcall	pause
00000f d092                      	rcall	pause
000010 d091                      	rcall	pause
000011 d090                      	rcall	pause
000012 d08f                      	rcall	pause
                                 	
                                 main:
                                 
000013 d003                      	rcall	get_io
                                 
000014 d041                      	rcall	ad_wandlung
                                 				
000015 d079                      	rcall	change_color
                                 
000016 cffc                      	rjmp	main
                                 
                                 
                                 
                                 // ---------------------------------------
                                 //        S U B R O U T I N E S
                                 // ---------------------------------------
                                 
                                 get_io:
000017 e010                      	ldi		r17, 0x00
                                 
000018 9bb2                      	sbis	PINB, 2
000019 c004                      	rjmp	get_io_weiter_1
00001a 9513                      	inc		r17
00001b 9513                      	inc		r17
00001c 9513                      	inc		r17
00001d 9513                      	inc		r17
                                 get_io_weiter_1:
                                 
00001e 9bb1                      	sbis	PINB, 1
00001f c002                      	rjmp	get_io_weiter_2
000020 9513                      	inc		r17
000021 9513                      	inc		r17
                                 get_io_weiter_2:
                                 
000022 9bb0                      	sbis	PINB, 0
000023 c001                      	rjmp	get_io_weiter_3
000024 9513                      	inc		r17
                                 get_io_weiter_3:
                                 
                                 	
000025 3018                      	cpi		r17, 0x08
000026 f008                      	brlo	color_8_hoeher
000027 c003                      	rjmp	color_8_weiter
                                 color_8_hoeher:
000028 e140                      	ldi r20, 0x10
000029 e150                      	ldi r21, 0x10
00002a e160                      	ldi r22, 0x10
                                 color_8_weiter:
                                 
                                 	
00002b 3017                      	cpi		r17, 0x07
00002c f008                      	brlo	color_7_hoeher
00002d c003                      	rjmp	color_7_weiter
                                 color_7_hoeher:
00002e e140                      	ldi r20, 0x10
00002f e050                      	ldi r21, 0x00
000030 e160                      	ldi r22, 0x10
                                 color_7_weiter:
                                 
                                 	
000031 3016                      	cpi		r17, 0x06
000032 f008                      	brlo	color_6_hoeher
000033 c003                      	rjmp	color_6_weiter
                                 color_6_hoeher:
000034 e040                      	ldi r20, 0x00
000035 e150                      	ldi r21, 0x10
000036 e160                      	ldi r22, 0x10
                                 color_6_weiter:
                                 
                                 	
000037 3015                      	cpi		r17, 0x05
000038 f008                      	brlo	color_5_hoeher
000039 c003                      	rjmp	color_5_weiter
                                 color_5_hoeher:
00003a e140                      	ldi r20, 0x10
00003b e150                      	ldi r21, 0x10
00003c e060                      	ldi r22, 0x00
                                 color_5_weiter:
                                 
                                 	
00003d 3014                      	cpi		r17, 0x04
00003e f008                      	brlo	color_4_hoeher
00003f c003                      	rjmp	color_4_weiter
                                 color_4_hoeher:
000040 e140                      	ldi r20, 0x10
000041 e050                      	ldi r21, 0x00
000042 e060                      	ldi r22, 0x00
                                 color_4_weiter:
                                 
                                 	
000043 3013                      	cpi		r17, 0x03
000044 f008                      	brlo	color_3_hoeher
000045 c003                      	rjmp	color_3_weiter
                                 color_3_hoeher:
000046 e040                      	ldi r20, 0x00
000047 e150                      	ldi r21, 0x10
000048 e060                      	ldi r22, 0x00
                                 color_3_weiter:
                                 
                                 
000049 3012                      	cpi		r17, 0x02
00004a f008                      	brlo	color_2_hoeher
00004b c003                      	rjmp	color_2_weiter
                                 color_2_hoeher:
00004c e040                      	ldi r20, 0x00
00004d e050                      	ldi r21, 0x00
00004e e160                      	ldi r22, 0x10
                                 color_2_weiter:
                                 
                                 
00004f 3011                      	cpi		r17, 0x01
000050 f008                      	brlo	color_1_hoeher
000051 c003                      	rjmp	color_1_weiter
                                 color_1_hoeher:
000052 e041                      	ldi r20, 0x01
000053 e051                      	ldi r21, 0x01
000054 e061                      	ldi r22, 0x01
                                 color_1_weiter:
                                 	
000055 9508                      	ret
                                 
                                 	
                                 // ---------------------------------------
                                 
                                 
                                 ad_wandlung:
                                 
000056 b194                      	in r25, ADCL	// ADCL
000057 b175                      	in r23, ADCH	// ADCH	
000058 9596                      	lsr r25
000059 9596                      	lsr r25
00005a 9596                      	lsr r25
00005b 9596                      	lsr r25
00005c 9596                      	lsr r25
00005d 9596                      	lsr r25
                                 
00005e 2f87                      	mov r24, r23		// zu große Werte abfangen
00005f 3f7b                      	cpi r23, 0xFB
000060 f408                      	brsh not_to_great
000061 0f89                      	add r24, r25
                                 not_to_great:
                                 
000062 3f8e                      	cpi r24, 254		// Grenzwert 11te LED
000063 f008                      	brlo hoeher_11
000064 c001                      	rjmp weiter_11
                                 hoeher_11:
000065 e07a                      	ldi r23, 0x0A
                                 weiter_11:
                                 
000066 3e86                      	cpi r24, 230		// Grenzwert 10te LED
000067 f008                      	brlo hoeher_10
000068 c001                      	rjmp weiter_10
                                 hoeher_10:
000069 e079                      	ldi r23, 0x09
                                 weiter_10:
                                 		
00006a 3c8c                      	cpi r24, 204
00006b f008                      	brlo hoeher_9
00006c c001                      	rjmp weiter_9
                                 hoeher_9:
00006d e078                      	ldi r23, 0x08
                                 weiter_9:
                                 	
00006e 3b83                      	cpi r24, 179
00006f f008                      	brlo hoeher_8
000070 c001                      	rjmp weiter_8
                                 hoeher_8:
000071 e077                      	ldi r23, 0x07
                                 weiter_8:
                                 	
000072 3989                      	cpi r24, 153
000073 f008                      	brlo hoeher_7
000074 c001                      	rjmp weiter_7
                                 hoeher_7:
000075 e076                      	ldi r23, 0x06
                                 weiter_7:
                                 	
000076 3880                      	cpi r24, 128
000077 f008                      	brlo hoeher_6
000078 c001                      	rjmp weiter_6
                                 hoeher_6:
000079 e075                      	ldi r23, 0x05
                                 weiter_6:
                                 	
00007a 3686                      	cpi r24, 102
00007b f008                      	brlo hoeher_5
00007c c001                      	rjmp weiter_5
                                 hoeher_5:
00007d e074                      	ldi r23, 0x04
                                 weiter_5:
                                 	
00007e 348d                      	cpi r24, 77
00007f f008                      	brlo hoeher_4
000080 c001                      	rjmp weiter_4
                                 hoeher_4:
000081 e073                      	ldi r23, 0x03
                                 weiter_4:
                                 	
000082 3383                      	cpi r24, 51
000083 f008                      	brlo hoeher_3
000084 c001                      	rjmp weiter_3
                                 hoeher_3:
000085 e072                      	ldi r23, 0x02
                                 weiter_3:
                                 	
000086 318a                      	cpi r24, 26
000087 f008                      	brlo hoeher_2
000088 c001                      	rjmp weiter_2
                                 hoeher_2:
000089 e071                      	ldi r23, 0x01
                                 weiter_2:
                                 
00008a 3081                      	cpi r24, 1
00008b f008                      	brlo hoeher_1
00008c c001                      	rjmp weiter_1
                                 hoeher_1:
00008d e070                      	ldi r23, 0x00
                                 weiter_1:
                                 
00008e 9508                      	ret
                                 
                                 
                                 
                                 // ---------------------------------------
                                 // neue Farbe setzen
                                 // ---------------------------------------
                                 change_color:
00008f 307c                      	cpi		r23, 0x0C
000090 f008                      	brlo	weiter
000091 e07b                      	ldi		r23, 0x0B			// Anzahl LEDs -> 0x0B sind 11
                                 
                                 weiter:
                                 
000092 e03b                      	ldi		r19, 0x0B			// Anzahl LEDs -> 0x0B sind 11
000093 1b37                      	sub		r19, r23
                                 led_inaktiv_loop:
000094 3030                      	cpi		r19, 0x00
000095 f019                      	breq	led_inaktiv_loop_end
000096 d03f                      	rcall	send_blank			// led aus
000097 953a                      	dec		r19
000098 cffb                      	rjmp	led_inaktiv_loop
                                 led_inaktiv_loop_end:
                                 
000099 2f37                      	mov		r19, r23
                                 led_aktiv_loop:
00009a 3030                      	cpi		r19, 0x00
00009b f019                      	breq	led_aktiv_loop_end
00009c d01d                      	rcall	send_color
00009d 953a                      	dec		r19
00009e cffb                      	rjmp	led_aktiv_loop
                                 led_aktiv_loop_end:
                                 	
                                 
00009f d002                      	rcall	pause
0000a0 d001                      	rcall	pause
0000a1 9508                      	ret
                                 
                                 
                                 // ---------------------------------------
                                 // Pause für Übernahme
                                 // ---------------------------------------
                                 pause:
0000a2 ec00                      	ldi		r16, 0xC0			// 50µs Pause für Übernahme der gesendeten Werte
                                 pausenloop:
0000a3 950a                      	dec		r16
0000a4 f7f1                      	brne	pausenloop
0000a5 9508                      	ret
                                 
                                 
                                 // ---------------------------------------
                                 // 1 High-Bit senden
                                 // ---------------------------------------
                                 high_:
0000a6 9ac4                      	sbi		PORTB, 4
0000a7 0000                      	nop
0000a8 0000                      	nop
0000a9 0000                      	nop
0000aa 0000                      	nop
0000ab 0000                      	nop
0000ac 0000                      	nop
                                 
0000ad 98c4                      	cbi		PORTB, 4
0000ae 0000                      	nop
0000af 9508                      	ret
                                 
                                 
                                 // ---------------------------------------
                                 // 1 Low-Bit senden
                                 // ---------------------------------------
                                 low_:
0000b0 9ac4                      	sbi		PORTB, 4
0000b1 0000                      	nop
                                 	
0000b2 98c4                      	cbi		PORTB, 4
0000b3 0000                      	nop
0000b4 0000                      	nop
0000b5 0000                      	nop
0000b6 0000                      	nop
0000b7 0000                      	nop
0000b8 0000                      	nop
0000b9 9508                      	ret
                                 
                                 
                                 // ---------------------------------------
                                 // 24 Bit übertragen (3 Farben)
                                 // ---------------------------------------
                                 send_color:
0000ba e028                       	ldi		r18, 0x08		// Schleifencounter 8 Bit
0000bb 2f14                      	mov		r17, r20
                                 send_loop1:
0000bc fd17                      	sbrc	r17, 7
0000bd dfe8                      	rcall	high_
0000be ff17                      	sbrs	r17, 7
0000bf dff0                      	rcall	low_
0000c0 0f11                      	lsl		r17
0000c1 952a                      	dec		r18
0000c2 f7c9                      	brne	send_loop1
                                 	
0000c3 e028                       	ldi		r18, 0x08		// Schleifencounter 8 Bit
0000c4 2f15                      	mov		r17, r21
                                 send_loop2:
0000c5 fd17                      	sbrc	r17, 7
0000c6 dfdf                      	rcall	high_
0000c7 ff17                      	sbrs	r17, 7
0000c8 dfe7                      	rcall	low_
0000c9 0f11                      	lsl		r17
0000ca 952a                      	dec		r18
0000cb f7c9                      	brne	send_loop2
                                 	
0000cc e028                       	ldi		r18, 0x08		// Schleifencounter 8 Bit
0000cd 2f16                      	mov		r17, r22
                                 send_loop3:
0000ce fd17                      	sbrc	r17, 7
0000cf dfd6                      	rcall	high_
0000d0 ff17                      	sbrs	r17, 7
0000d1 dfde                      	rcall	low_
0000d2 0f11                      	lsl		r17
0000d3 952a                      	dec		r18
0000d4 f7c9                      	brne	send_loop3
0000d5 9508                      	ret
                                 
                                 
                                 // ---------------------------------------
                                 // LED aus
                                 // ---------------------------------------
                                 send_blank:
0000d6 e128                       	ldi		r18, 0x18		// Schleifencounter 24 Bit
0000d7 e010                      	ldi		r17, 0x00
                                 send_loop:
0000d8 fd17                      	sbrc	r17, 7
0000d9 dfcc                      	rcall	high_
0000da ff17                      	sbrs	r17, 7
0000db dfd4                      	rcall	low_
0000dc 0f11                      	lsl		r17
0000dd 952a                      	dec		r18
0000de f7c9                      	brne	send_loop
0000df 9508                      	ret
                                 
                                 
                                 // ENDE -------------------------------------------------------------- ENDE //
                                 /*
                                 11 LEDS Grenzwerte 5V Betrieb 3,3V Poti-Versorgung
                                 
                                 	cpi r24, 0xA9
                                 	cpi r24, 0xA3
                                 	cpi r24, 0x8F
                                 	cpi r24, 0x7C
                                 	cpi r24, 0x68
                                 	cpi r24, 0x53
                                 	cpi r24, 0x3C
                                 	cpi r24, 0x29
                                 	cpi r24, 0x16
                                 	cpi r24, 0x05
                                 	cpi r24, 0x01
                                 	
                                 
                                 11 LEDS Grenzwerte 5V Betrieb 5V Poti-Versorgung
                                 
                                 	cpi r24, 254
                                 	cpi r24, 230
                                 	cpi r24, 204
                                 	cpi r24, 179
                                 	cpi r24, 153
                                 	cpi r24, 128
                                 	cpi r24, 102
                                 	cpi r24, 77
                                 	cpi r24, 51
                                 	cpi r24, 26
                                 	cpi r24, 1
                                 
                                 
                                 13 LEDs Grenzwerte 5V Betrieb 5V Poti-Versorgung
                                 	
                                 	cpi r24, 0xFE
                                 	cpi r24, 0xEF
                                 	cpi r24, 0xD8
                                 	cpi r24, 0xC1
                                 	cpi r24, 0xAA
                                 	cpi r24, 0x93
                                 	cpi r24, 0x7C
                                 	cpi r24, 0x65
                                 	cpi r24, 0x4E
                                 	cpi r24, 0x37
                                 	cpi r24, 0x20
                                 	cpi r24, 0x09
                                 	cpi r24, 0x01
                                 
                                 	*/


RESOURCE USE INFORMATION
------------------------

Notice:
The register and instruction counts are symbol table hit counts,
and hence implicitly used resources are not counted, eg, the
'lpm' instruction without operands implicitly uses r0 and z,
none of which are counted.

x,y,z are separate entities in the symbol table and are
counted separately from r26..r31 here.

.dseg memory usage only counts static data declared with .byte

"ATtiny13" register use summary:
x  :   0 y  :   0 z  :   0 r0 :   0 r1 :   0 r2 :   0 r3 :   0 r4 :   0 
r5 :   0 r6 :   0 r7 :   0 r8 :   0 r9 :   0 r10:   0 r11:   0 r12:   0 
r13:   0 r14:   0 r15:   0 r16:   8 r17:  32 r18:   8 r19:   7 r20:  10 
r21:  10 r22:  10 r23:  19 r24:  13 r25:   8 r26:   0 r27:   0 r28:   0 
r29:   0 r30:   0 r31:   0 
Registers used: 10 out of 35 (28.6%)

"ATtiny13" instruction use summary:
.lds  :   0 .sts  :   0 adc   :   0 add   :   1 adiw  :   0 and   :   0 
andi  :   0 asr   :   0 bclr  :   0 bld   :   0 brbc  :   0 brbs  :   0 
brcc  :   0 brcs  :   0 break :   0 breq  :   2 brge  :   0 brhc  :   0 
brhs  :   0 brid  :   0 brie  :   0 brlo  :  20 brlt  :   0 brmi  :   0 
brne  :   5 brpl  :   0 brsh  :   1 brtc  :   0 brts  :   0 brvc  :   0 
brvs  :   0 bset  :   0 bst   :   0 cbi   :   2 cbr   :   0 clc   :   0 
clh   :   0 cli   :   0 cln   :   0 clr   :   0 cls   :   0 clt   :   0 
clv   :   0 clz   :   0 com   :   0 cp    :   0 cpc   :   0 cpi   :  23 
cpse  :   0 dec   :   7 eor   :   0 icall :   0 ijmp  :   0 in    :   2 
inc   :   7 ld    :   0 ldd   :   0 ldi   :  51 lds   :   0 lpm   :   0 
lsl   :   4 lsr   :   6 mov   :   5 movw  :   0 neg   :   0 nop   :  14 
or    :   0 ori   :   0 out   :   3 pop   :   0 push  :   0 rcall :  20 
ret   :   8 reti  :   0 rjmp  :  25 rol   :   0 ror   :   0 sbc   :   0 
sbci  :   0 sbi   :   6 sbic  :   0 sbis  :   3 sbiw  :   0 sbr   :   0 
sbrc  :   4 sbrs  :   4 sec   :   0 seh   :   0 sei   :   0 sen   :   0 
ser   :   0 ses   :   0 set   :   0 sev   :   0 sez   :   0 sleep :   0 
spm   :   0 st    :   0 std   :   0 sts   :   0 sub   :   1 subi  :   0 
swap  :   0 tst   :   0 wdr   :   0 
Instructions used: 24 out of 105 (22.9%)

"ATtiny13" memory use summary [bytes]:
Segment   Begin    End      Code   Data   Used    Size   Use%
---------------------------------------------------------------
[.cseg] 0x000000 0x0001c0    448      0    448    1024  43.8%
[.dseg] 0x000060 0x000060      0      0      0      64   0.0%
[.eseg] 0x000000 0x000000      0      0      0      64   0.0%

Assembly complete, 0 errors, 0 warnings
